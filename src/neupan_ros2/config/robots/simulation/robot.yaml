# NeuPAN Simulation Configuration
# Configuration for ddr_minimal_sim simulator integration

neupan_node:
  ros__parameters:
    use_sim_time: true

    # Robot identification
    robot_type: 'simulation'
    robot_description: 'Simulated differential drive robot'

    # Configuration file paths (relative to robot directory)
    planner_config_file: 'planner.yaml'
    dune_checkpoint_file: 'models/dune_model_5000.pth'

    # TF Frame configuration
    map_frame: 'map'           # Global map coordinate frame
    base_frame: 'base_link'    # Robot base frame
    lidar_frame: 'base_link'   # LiDAR frame

    # ========== Visualization Configuration ==========
    enable_visualization: false   # Master switch for all visualization
    enable_dune_markers: true    # Enable DUNE point cloud markers
    enable_nrmp_markers: true    # Enable NRMP point cloud markers
    enable_robot_marker: true    # Enable robot footprint marker
    marker_size: 0.05            # DUNE/NRMP point marker size
    marker_z: 0.3                # Robot marker height (adapted for small robot)

    # ========== Laser Scan Processing Configuration ==========
    scan_angle_max: 3.14       # Maximum scan angle (180 degrees)
    scan_angle_min: -3.14      # Minimum scan angle (-180 degrees)
    scan_downsample: 1         # Scan downsampling rate (1=use all points)
    scan_range_max: 5.0        # Maximum scan distance (meters)
    scan_range_min: 0.01       # Minimum scan distance (meters)

    # ========== Path Planning Configuration ==========
    flip_angle: false                       # Whether to flip scan angles
    refresh_initial_path: true              # Refresh path when receiving new path
    include_initial_path_direction: false   # Use point gradient to calculate direction
    control_frequency: 50.0                 # Control loop frequency (Hz)

    # ========== Topic Configuration (Optional) ==========
    # Uncomment and modify to customize topic names for integration
    # cmd_vel_topic: '/neupan_cmd_vel'        # Velocity command output
    # scan_topic: '/scan'                     # Laser scan input
    # plan_input_topic: '/plan'               # Global path input
    # goal_topic: '/goal_pose'                # Goal pose input
    # plan_output_topic: '/neupan_plan'       # Optimized trajectory output
    # ref_state_topic: '/neupan_ref_state'    # Reference state output
    # initial_path_topic: '/neupan_initial_path'  # Initial path visualization
    # dune_markers_topic: '/dune_point_markers'   # DUNE visualization
    # robot_marker_topic: '/robot_marker'         # Robot footprint marker
    # nrmp_markers_topic: '/nrmp_point_markers'   # NRMP visualization

# Simulator parameter notes (for launch file, not ROS parameters):
# - robot_config: Robot configuration (scout_mini/custom_robot)
# - map_config: Map configuration (obs/obs_exam/obs1)
# - use_rviz: Whether to launch RViz
